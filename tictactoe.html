<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <style>
        /* Simple transition for cell hover */
        .game-cell:hover {
            background-color: #f1f5f9; /* equivalent to tailwind's slate-100 */
        }
        
        /* Define the colors for X and O */
        .text-x {
            color: #3b82f6; /* blue-500 */
        }
        .text-o {
            color: #ef4444; /* red-500 */
        }
    </style>
</head>
<body class="h-full bg-slate-50 font-sans flex items-center justify-center text-slate-800">

    <main class="text-center p-6 md:p-10 bg-white rounded-xl shadow-xl max-w-md w-full">
        <!-- Game Title -->
        <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4">
            Tic Tac Toe
        </h1>
        
        <!-- Game Status Display -->
        <!-- This paragraph will be updated by JavaScript -->
        <p id="game-status" class="text-xl md:text-2xl text-slate-600 mb-6 h-8">
            Player X's turn
        </p>

        <!-- Game Board -->
        <div id="game-board" class="grid grid-cols-3 gap-3 max-w-xs mx-auto mb-6">
            <!-- 
              The 9 game cells will be created here.
              We use 'data-cell-index' to track which cell is which (0-8).
            -->
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="0"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="1"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="2"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="3"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="4"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="5"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="6"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="7"></div>
            <div class="game-cell w-24 h-24 md:w-28 md:h-28 bg-white border-4 border-slate-200 rounded-lg
                        flex items-center justify-center text-5xl md:text-6xl font-bold
                        cursor-pointer transition duration-150" data-cell-index="8"></div>
        </div>

        <!-- Restart Button -->
        <button id="restart-button" class="w-full px-6 py-3 bg-blue-600 text-white font-semibold
                       rounded-lg shadow-md hover:bg-blue-700 transition duration-200
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
            Restart Game
        </button>

    </main>

    <script>
        // Wait for the document to be fully loaded before running the script
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- DOM Elements ---
            const statusDisplay = document.getElementById('game-status');
            const gameCells = document.querySelectorAll('.game-cell');
            const restartButton = document.getElementById('restart-button');

            // --- Game State Variables ---
            let gameActive = true;
            let currentPlayer = 'X';
            // Represents the board as an array. Empty strings are empty cells.
            let gameState = ["", "", "", "", "", "", "", "", ""];

            // --- Messages ---
            const winningMessage = () => `Player ${currentPlayer} has won! ðŸŽ‰`;
            const drawMessage = () => `Game ended in a draw! ðŸ˜`;
            const currentPlayerTurn = () => `Player ${currentPlayer}'s turn`;

            // All possible winning combinations
            const winConditions = [
                [0, 1, 2], // Row 1
                [3, 4, 5], // Row 2
                [6, 7, 8], // Row 3
                [0, 3, 6], // Col 1
                [1, 4, 7], // Col 2
                [2, 5, 8], // Col 3
                [0, 4, 8], // Diag 1
                [2, 4, 6]  // Diag 2
            ];

            // --- Functions ---

            /**
             * Handles a click on a cell.
             */
            function handleCellClick(event) {
                const clickedCell = event.target;
                // Get the index from the 'data-cell-index' attribute
                const clickedCellIndex = parseInt(clickedCell.getAttribute('data-cell-index'));

                // Check if the cell is already played or if the game is over
                if (gameState[clickedCellIndex] !== "" || !gameActive) {
                    return;
                }

                // If the click is valid, handle the turn
                handleCellPlayed(clickedCell, clickedCellIndex);
                handleResultValidation();
            }

            /**
             * Updates the game state and UI for a played cell.
             */
            function handleCellPlayed(clickedCell, clickedCellIndex) {
                // Update the internal game state
                gameState[clickedCellIndex] = currentPlayer;
                
                // Update the UI
                clickedCell.innerHTML = currentPlayer;
                
                // Add the correct text color class
                if (currentPlayer === 'X') {
                    clickedCell.classList.add('text-x');
                } else {
                    clickedCell.classList.add('text-o');
                }
            }

            /**
             * Checks the game state for a win or a draw.
             */
            function handleResultValidation() {
                let roundWon = false;
                
                // Check every winning condition
                for (let i = 0; i < winConditions.length; i++) {
                    const winCondition = winConditions[i];
                    let a = gameState[winCondition[0]];
                    let b = gameState[winCondition[1]];
                    let c = gameState[winCondition[2]];

                    // If any cell in a condition is empty, it's not a win
                    if (a === '' || b === '' || c === '') {
                        continue;
                    }
                    
                    // If all three cells are the same player, it's a win
                    if (a === b && b === c) {
                        roundWon = true;
                        break;
                    }
                }

                if (roundWon) {
                    statusDisplay.innerHTML = winningMessage();
                    gameActive = false;
                    return;
                }

                // Check for a draw (no empty cells left)
                let roundDraw = !gameState.includes("");
                if (roundDraw) {
                    statusDisplay.innerHTML = drawMessage();
                    gameActive = false;
                    return;
                }

                // If no win and no draw, switch the player
                handlePlayerChange();
            }

            /**
             * Switches the current player and updates the status display.
             */
            function handlePlayerChange() {
                currentPlayer = (currentPlayer === 'X') ? 'O' : 'X';
                statusDisplay.innerHTML = currentPlayerTurn();
            }

            /**
             * Resets the game to its initial state.
             */
            function handleRestartGame() {
                gameActive = true;
                currentPlayer = 'X';
                gameState = ["", "", "", "", "", "", "", "", ""];
                
                // Reset UI
                statusDisplay.innerHTML = currentPlayerTurn();
                gameCells.forEach(cell => {
                    cell.innerHTML = "";
                    cell.classList.remove('text-x', 'text-o'); // Remove color classes
                });
            }

            // --- Event Listeners ---
            
            // Add click listeners to all cells
            gameCells.forEach(cell => {
                cell.addEventListener('click', handleCellClick);
            });
            
            // Add click listener to the restart button
            restartButton.addEventListener('click', handleRestartGame);
            
            // --- Initial Setup ---
            
            // Set the initial status message
            statusDisplay.innerHTML = currentPlayerTurn();
        });
    </script>

</body>
</html>